
import { NdxBookParseService } from './ndx-book-parse.service';

const testCase1 = { "data": "\"Ticker,Name,Last Price,Market Cap,P/E (NTM),P/E (LTM),EV/Sales (NTM),EV/Sales (LTM),Div Yield (LTM),Price Target - #,Price Target,Price Target (1W Ago),Price Target (1M Ago),Price Target (3M Ago),Price Target (6M Ago),Price Target (1Y Ago),# Strong Buys Ratings,# Buys Ratings,# Hold Ratings,# Sell Ratings,# Strong Sell Ratings,EPS - Est Avg (NTM),Basic EPS - Cont (LTM),EPS - Est Avg (FY1E),EPS - Est Avg (FY2E),Next Earnings\r\nAAPL,Apple Inc.,144.84,$2394.23B,26.3x,28.4x,6.3x,6.7x,0.60%,41.00,165.36,165.36,165.11,156.24,150.10,122.53,7,26,9,1,1,5.51,5.15,5.58,5.64,Fri Oct 29th 2021 \r\nMSFT,Microsoft Corporation,304.21,$2283.98B,34.5x,37.8x,11.7x,13.3x,0.72%,34.00,335.34,335.34,333.23,297.58,275.50,234.26,9,26,2,0,0,8.81,8.12,8.81,10.10,Tue Oct 26th 2021 (After-Market)\r\nAMZN,Amazon.com Inc.,3409.02,$1726.47B,62.0x,59.4x,3.5x,4.0x,-,46.00,4178.90,4178.90,4184.10,4245.18,4034.17,3735.98,13,36,0,0,0,54.94,58.52,52.67,66.78,Thu Oct 28th 2021 \r\nTSLA,Tesla Inc.,843.03,$834.61B,126.0x,444.4x,13.9x,19.9x,-,31.00,703.89,688.99,686.09,658.16,636.47,344.53,3,11,11,2,6,6.69,2.25,5.59,7.37,Wed Oct 20th 2021 (After-Market)\r\nFB,Facebook Inc.,324.76,$915.64B,22.7x,24.1x,6.7x,8.2x,-,47.00,416.22,416.22,415.96,386.28,337.94,292.88,10,32,7,1,1,14.32,13.69,14.09,15.93,Mon Oct 25th 2021 (After-Market)\r\nGOOG,Alphabet Inc.,2833.50,$1887.12B,28.6x,30.7x,6.6x,8.1x,-,12.00,3111.12,3077.78,3077.78,2673.31,2259.51,1786.11,13,31,2,0,0,98.89,93.32,101.22,107.53,Tue Oct 26th 2021 \r\nGOOGL,Alphabet Inc.,2827.36,$1887.12B,28.6x,30.7x,6.6x,8.1x,-,39.00,3226.03,3214.49,3197.00,2803.47,2381.60,1749.46,13,31,2,0,0,98.89,93.32,101.22,107.53,Tue Oct 26th 2021 \r\nNVDA,NVIDIA Corporation,218.62,$545.68B,51.8x,78.3x,19.8x,24.6x,0.07%,40.00,227.82,227.82,223.66,189.17,162.16,141.28,7,28,4,1,2,4.22,2.85,4.06,4.54,Wed Nov 17th 2021 \r\nPYPL,PayPal Holdings Inc.,268.35,$315.32B,52.9x,65.5x,11.1x,13.1x,-,42.00,328.80,328.80,328.59,320.15,307.23,219.20,12,28,5,1,0,5.07,4.15,4.72,5.90,Invalid date \r\nCMCSA,Comcast Corporation,54.02,$247.94B,15.6x,20.1x,2.8x,3.1x,1.75%,32.00,66.93,66.84,66.54,64.87,61.15,50.74,8,21,6,1,0,3.46,2.72,3.11,3.76,Thu Oct 28th 2021 (Pre-Market)\r\nINTC,Intel Corporation,54.46,$220.94B,13.1x,12.1x,3.2x,3.0x,2.52%,37.00,62.63,62.63,62.89,65.17,66.40,57.96,6,10,17,3,7,4.15,4.53,4.79,4.43,Thu Oct 21st 2021 (After-Market)\r\nNFLX,Netflix Inc.,628.29,$278.08B,58.2x,65.1x,9.1x,10.4x,-,41.00,613.60,599.23,594.36,592.12,612.25,525.55,9,24,6,3,2,10.79,9.92,10.50,12.98,Tue Oct 19th 2021 \r\nADBE,Adobe Inc.,610.09,$290.28B,44.8x,50.4x,16.6x,19.1x,-,26.00,702.27,702.27,640.11,619.71,565.43,543.61,8,16,5,0,0,13.63,12.21,12.47,14.15,Thu Dec 16th 2021 \r\nCSCO,Cisco Systems Inc.,55.25,$233.03B,16.1x,22.1x,4.2x,4.4x,2.64%,25.00,63.10,63.10,60.23,56.75,52.57,48.77,6,10,14,0,0,3.43,2.51,3.43,3.68,Wed Nov 17th 2021 \r\nPEP,PepsiCo Inc.,158.81,$219.58B,24.4x,27.1x,3.2x,3.3x,2.62%,20.00,166.04,165.79,164.63,163.57,151.14,151.87,4,7,10,0,1,6.50,5.90,6.24,6.73,Sat Jan 15th 2022 \r\nAVGO,Broadcom Inc.,503.25,$207.15B,16.5x,37.3x,8.2x,8.9x,2.92%,30.00,553.57,548.67,547.03,526.80,509.58,399.77,8,17,6,0,1,30.50,14.15,27.98,30.98,Fri Dec 10th 2021 \r\nTXN,Texas Instruments Incorporated,194.45,$179.52B,24.5x,27.1x,9.8x,10.6x,2.03%,28.00,204.96,204.96,205.03,202.16,187.37,142.92,4,9,13,1,4,7.94,7.27,8.01,8.29,Tue Oct 26th 2021 \r\nTMUS,T-Mobile US Inc.,117.56,$146.71B,43.0x,37.7x,3.1x,3.1x,-,27.00,168.22,168.96,170.42,163.04,157.90,134.09,10,17,3,1,0,2.74,3.15,2.33,3.32,Thu Oct 28th 2021 \r\nCOST,Costco Wholesale Corporation,452.39,$199.88B,37.4x,40.1x,0.9x,1.0x,0.66%,27.00,477.26,476.59,446.89,410.96,378.79,367.75,7,14,9,0,2,12.10,11.30,12.10,13.26,Thu Dec 9th 2021 (After-Market)\r\nQCOM,QUALCOMM Incorporated,130.20,$146.87B,14.5x,16.3x,4.2x,4.6x,2.02%,26.00,174.50,175.15,177.08,171.88,169.73,127.15,4,16,9,0,0,9.00,8.14,8.25,9.27,Wed Nov 3rd 2021 \r\nAMGN,Amgen Inc.,207.84,$118.02B,12.4x,21.1x,5.3x,5.6x,3.30%,21.00,243.14,243.90,245.81,249.79,253.37,258.52,1,7,16,2,0,16.78,9.92,16.36,17.80,Tue Nov 2nd 2021 \r\nSBUX,Starbucks Corporation,111.45,$131.41B,29.9x,46.4x,4.7x,5.5x,1.57%,31.00,129.85,129.71,130.98,123.83,113.99,87.30,5,15,15,0,0,3.73,2.41,3.23,3.71,Fri Oct 22nd 2021 \r\nAdd TickerNew Group\r\n\"" };
const service = new NdxBookParseService();

test('Parse', () => {
    const { data } = testCase1;
    const result = service.parse(data, false);
    expect(result).toBeDefined();
});

test('Parse for front', () => {
    const { data } = testCase1;
    const result = service.parse(data, true);
    expect(result).toBeDefined();
});